**Project Plan: Laravel + Filament Multi-Tenant App with Google Login**

**Tech Stack:**

* Laravel 12 / PHP 8.3
* Filament admin panel framework v4
* MySQL (single database for all tenants)
* Google-only authentication (via Socialite)
* Multi-tenancy handled manually with `tenant_id` in tables

**Architecture:**

1. **Two Filament panels:**

   * **Admin Panel:** For system admins to manage tenants, users, and invites
   * **User Dashboard Panel:** For normal users, restricted to their tenant data

2. **Tenant Management:**

   * `tenants` table stores all tenant info, including **type** (`accounting` or `commercial`)
   * `users` table has nullable `tenant_id` to assign users to a tenant
   * Global query scopes enforce tenant-level data access

3. **Google-only Login:**

   * Users login exclusively via Google OAuth
   * No password or normal login needed
   * Filament login view customized to show only “Login with Google” (apprently there is a better way to do it - on hold)

4. **Tenant Onboarding Flow:**

   * After login, if user has no `tenant_id`, redirect to tenant creation/join page
   * Users can either:

     * **Create a new tenant** → tenant assigned automatically
     * **Join existing tenant via invite code or invite link** → tenant assigned automatically

5. **Invite System:**

   * Per-user unique invite codes generated by admins
   * Invite codes stored in `tenant_invites` table with `used_by` field
   * Invite links (`/invite/{code}`) auto-join users to the tenant after login
   * Ensures **one invite = one user**

6. **Key Features:**

   * Automatic tenant context applied to all tenant-owned data
   * Admin panel unrestricted (super-admin access)
   * Users without a tenant are always prompted to create or join
   * Invite link handling works for both new and existing users
   * Tenant type (`accounting` or `commercial`) can be used to customize dashboard/resources

**Outcome:**

* Single database multi-tenancy without extra tenancy packages
* Secure, Google-only authentication
* Smooth onboarding for users with dynamic tenant creation or invite joining
* Clear separation of admin and tenant user interfaces
* Tenant types allow for role-specific dashboards and features