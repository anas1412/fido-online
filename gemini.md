**Project Plan: Laravel + Filament Multi-Tenant App with Google Login**

**Tech Stack:**

* Laravel 12 / PHP 8.3
* Filament admin panel framework v4
* MySQL (single database for all tenants)
* Google-only authentication (via Socialite)
* Multi-tenancy handled with a many-to-many relationship

**Architecture:**

1. **Two Filament panels:**

   * **Admin Panel:** For system admins to manage tenants, users, and invites
   * **User Dashboard Panel:** For normal users, restricted to their tenant data

2. **Tenant Management (Filament v4 Way):**

   * `tenants` table stores all tenant info, including **type** (`accounting` or `commercial`)
   * A `tenant_user` pivot table manages the many-to-many relationship between users and tenants.
   * The `User` model implements the `Filament\Models\Contracts\HasTenants` contract.
   * Global query scopes enforce tenant-level data access automatically.

3. **Google-only Login:**

   * Users login exclusively via Google OAuth
   * No password or normal login needed
   * Filament login view customized to show only “Login with Google”

4. **Tenant Onboarding Flow:**

   * Filament's built-in `tenantRegistration()` feature will be used.
   * After login, if a user has no tenants, they are redirected to a page to create or join a tenant.

5. **Invite System:**

   * Per-user unique invite codes generated by admins
   * Invite codes stored in `tenant_invites` table with `used_by` field
   * Invite links (`/invite/{code}`) auto-join users to the tenant after login
   * Ensures **one invite = one user**

6. **Key Features:**

   * Automatic tenant context applied to all tenant-owned data
   * Admin panel unrestricted (super-admin access)
   * Users without a tenant are always prompted to create or join
   * Invite link handling works for both new and existing users
   * Tenant type (`accounting` or `commercial`) can be used to customize dashboard/resources

**Outcome:**

* Single database multi-tenancy aligned with Filament's recommended practices.
* Secure, Google-only authentication
* Smooth onboarding for users with dynamic tenant creation or invite joining
* Clear separation of admin and tenant user interfaces
* Tenant types allow for role-specific dashboards and features